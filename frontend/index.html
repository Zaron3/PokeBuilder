<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PokeBuilder</title>

  <link rel="icon" type="image/svg+xml" href="src/pokeball-icon.svg" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="style.css" />
</head>

<body class="dark">

<header class="header">
    <div class="brand">
        <img src="src/pokeball-icon.svg" alt="Pokéball" class="brand-icon" />
        <span class="brand-name">PokeBuilder</span>
    </div>

    <div class="user-actions">
        <button id="login-btn" class="icon-btn" aria-label="Inicia Sessió">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span id="user-name-display" class="user-label">Login</span>
        </button>
    </div>
</header>

  <main class="container">

      <section class="team-top">
          <div class="team-header-row">
              <div class="team-name-input-wrapper">
                  <input type="text" id="team-name-input" class="team-name-input" placeholder="Nom de l'Equip..." value="El Meu Equip">
                  <span class="edit-icon">✏️</span>
              </div>
              <button id="save-team-btn" class="ui-btn primary">Guardar Equip</button>
          </div>

          <div id="team-grid" class="team-grid">
          </div>
      </section>

    <section class="carousel-area">
      <h3 class="section-title subtle">Vista 3D</h3>
      <div class="wrapper">
        <div id="carousel-inner" class="inner" style="--quantity: 0;"></div>
      </div>
    </section>

      <div id="loading-spinner" class="loader-overlay hidden">
          <div class="spinner"></div>
          <p>Carregant dades...</p>
      </div>

    <section class="holo-stats-container">
      
      <div class="holo-card glass-neon blue">
        <div class="holo-icon">
          <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
        </div>
        <div class="holo-content">
          <span class="holo-label">TEAM POWER</span>
          <h2 id="team-power-val">0</h2>
        </div>
        <div class="holo-bg"></div>
      </div>

      <div class="holo-card glass-neon purple">
        <div class="holo-icon">
          <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>
        </div>
        <div class="holo-content">
          <span class="holo-label">DOMINI</span>
          <h2 id="team-dominant-val">-</h2>
        </div>
        <div class="holo-bg"></div>
      </div>

      <div class="holo-card glass-neon red">
        <div class="holo-icon">
          <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        </div>
        <div class="holo-content">
          <span class="holo-label">VULNERABLE A</span>
          <h2 id="team-weak-val">-</h2>
        </div>
        <div class="holo-bg"></div>
      </div>

    </section>

  </main>

<div id="pokemon-modal" class="modal" aria-hidden="true">
    <div class="modal-content glass-panel large" role="dialog">
        <button class="close-btn" aria-label="Tanca">×</button>

        <h2 style="margin-bottom: 20px; padding-left: 5px;">Cercador de Pokémon</h2>

        <div class="datagrid-container">
            <table class="pokemon-table">
                <thead>
                <tr>
                    <th class="col-img">Img</th>
                    <th class="sortable" data-key="id">ID <small>⇅</small></th>
                    <th class="sortable" data-key="name">Nom <small>⇅</small></th>
                    <th style="position: relative;">

                        <button id="type-filter-btn" class="table-input type-trigger">
                            Tots els tipus ▾
                        </button>

                        <div id="type-filter-popup" class="type-popup hidden">
                            <div class="type-grid" id="type-grid-container">
                            </div>

                            <div class="type-popup-actions">
                                <button id="clear-types-btn" class="ui-btn ghost small">Netejar</button>
                            </div>
                        </div>

                    </th>
                    <th class="col-stat sortable" data-key="hp">HP</th>
                    <th class="col-stat sortable" data-key="attack">ATK</th>
                    <th class="col-stat sortable" data-key="defense">DEF</th>
                    <th class="col-stat sortable" data-key="special_attack">SPA</th>
                    <th class="col-stat sortable" data-key="special_defense">SPD</th>
                    <th class="col-stat sortable" data-key="speed">SPE</th>
                    <th class="col-action"></th>
                </tr>

                <tr class="filter-row">
                    <th></th> <th><input type="text" id="filter-id" placeholder="#" class="table-input"></th>
                    <th><input type="text" id="filter-name" placeholder="Filtra per nom..." class="table-input"></th>
                    <th colspan="1"></th>
                    <th><input type="number" id="filter-hp" placeholder="Min" class="table-input stat-input"></th>
                    <th><input type="number" id="filter-atk" placeholder="Min" class="table-input stat-input"></th>
                    <th><input type="number" id="filter-def" placeholder="Min" class="table-input stat-input"></th>
                    <th><input type="number" id="filter-spa" placeholder="Min" class="table-input stat-input"></th>
                    <th><input type="number" id="filter-spd" placeholder="Min" class="table-input stat-input"></th>
                    <th><input type="number" id="filter-spe" placeholder="Min" class="table-input stat-input"></th>

                </tr>
                </thead>

                <tbody id="table-body">
                </tbody>
            </table>


        </div>

        <div class="table-footer">
            <span id="results-count">Mostrant 0 resultats</span>

            <div id="pagination-controls" class="pagination-container">
            </div>
        </div>

    </div>
</div>
  
  <div id="recommend-modal" class="modal" aria-hidden="true">
    <div class="modal-content glass-panel" role="dialog">
      <button class="close-btn" aria-label="Tanca">×</button>

      <div id="recommend-status"></div>

      <div id="recommend-results" style="display: none;">
        
        <div class="rec-header">
          <div class="rec-visual">
             <img id="recommend-sprite" src="" alt="Pokémon" />
             <div class="rec-score-badge">
                <span id="rec-score">0</span>
                <small>% FIT</small>
             </div>
          </div>
          
          <div class="rec-info">
             <h2 id="rec-name">NOM POKEMON</h2>
             <p id="rec-id">#000</p>
             <div id="rec-types" class="type-row"></div>
          </div>
        </div>

        <hr class="divider">

        <div class="rec-grid">
          
          <div class="rec-column">
            <h4 class="rec-subtitle">
              Motius de la selecció
            </h4>
            <ul id="rec-reasoning" class="rec-list pros"></ul>

            <div id="rec-warnings-container" style="display:none">
               <h4 class="rec-subtitle warning">
                 Atenció
               </h4>
               <ul id="rec-warnings" class="rec-list cons"></ul>
            </div>
          </div>

          <div class="rec-column stats-col">
             <h4 class="rec-subtitle">
               Anàlisi d'Impacte
             </h4>
             
             <div class="stat-row">
                <span>Defensiva</span>
                <div class="progress-bar"><div id="bar-def" style="width: 0%"></div></div>
             </div>
             <div class="stat-row">
                <span>Ofensiva</span>
                <div class="progress-bar"><div id="bar-off" style="width: 0%"></div></div>
             </div>
             <div class="stat-row">
                <span>Sinergia</span>
                <div class="progress-bar"><div id="bar-div" style="width: 0%"></div></div>
             </div>
          </div>
        </div>

        <div id="rec-action-container" class="rec-action-area">
          <button id="accept-rec-btn" class="glow-btn">
            Afegir a l'equip
          </button>
        </div>

      </div>
    </div>
  </div>

  <div class="floating-menu">
    <button id="recommend-btn" class="fab-btn blue" title="Recomana'm" disabled>
      <svg width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7z"></path><path d="M9 21h6"></path></svg>
    </button>

    <button id="random-btn" class="fab-btn gray" title="Equip Aleatori">
      <svg width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 8h.01"></path><path d="M8 8h.01"></path><path d="M8 16h.01"></path><path d="M16 16h.01"></path><path d="M12 12h.01"></path></svg>
    </button>

    <button id="add-btn" class="fab-btn outline" title="Afegeix Pokémon">
      <svg width="28" height="28" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
    </button>

    <button id="clear-btn" class="fab-btn red" title="Buida Equip">
      <svg width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
    </button>
  </div>

<div id="auth-modal" class="modal" aria-hidden="true">
    <div class="modal-content glass-panel small" role="dialog">
        <button class="close-btn" aria-label="Tanca">×</button>

        <div id="view-login">
            <div class="auth-header">
                <h2>Benvingut!</h2>
                <p>Inicia sessió per guardar els teus equips.</p>
            </div>

            <form id="form-login" class="auth-form">
                <div class="input-group">
                    <label>Nom d'Usuari</label>
                    <input type="text" id="login-user" placeholder="Entrenador..." required>
                </div>

                <div class="input-group">
                    <label>Contrasenya</label>
                    <input type="password" id="login-pass" placeholder="••••••" required>
                </div>
                <button type="submit" class="ui-btn primary full">Entrar</button>
            </form>

            <div class="auth-footer">
                <p>No tens compte? <a href="#" id="go-to-register" class="link">Registra't</a></p>
            </div>
        </div>

        <div id="view-register" class="hidden">
            <div class="auth-header">
                <h2>Nou Compte</h2>
                <p>Uneix-te a la comunitat PokeBuilder.</p>
            </div>

            <form id="form-register" class="auth-form">
                <div class="input-group">
                    <label>Nom d'Usuari</label>
                    <input type="text" id="reg-user" placeholder="Nom..." required>
                </div>
                <div class="input-group">
                    <label>Contrasenya</label>
                    <input type="password" id="reg-pass" placeholder="••••••" required>
                </div>

                <button type="submit" class="ui-btn primary full">Crear Compte</button>
            </form>

            <div class="auth-footer">
                <p>Ja tens compte? <a href="#" id="go-to-login" class="link">Inicia Sessió</a></p>
            </div>
        </div>

    </div>
</div>

<div id="profile-modal" class="modal" aria-hidden="true">
    <div class="modal-content glass-panel edium" role="dialog">
        <button class="close-btn" aria-label="Tanca">×</button>

        <div class="profile-header">
            <div class="profile-info">
                <div class="profile-avatar">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                </div>
                <div>
                    <h2 id="profile-username">Usuari</h2>
                    <span class="badge">Entrenador</span>
                </div>
            </div>
            <button id="profile-logout-btn" class="ui-btn ghost red-text small">
                Tancar Sessió
            </button>
        </div>

        <hr class="divider">

        <div class="profile-body">
            <h3 class="section-label" style="margin-bottom: 15px;">Els meus Equips</h3>

            <div id="user-teams-list" class="teams-list-container">
            </div>
        </div>

    </div>
</div>

  <script src="app.js"></script>

</body>
</html>