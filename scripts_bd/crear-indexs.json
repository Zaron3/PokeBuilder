// ===============================================
// SCRIPT DE CREACIÓ D'ÍNDEXS - POKEBUILDER
// ===============================================

// 1. ESBORREM ELS ÍNDEXS ANTICS (SI EXISTEIXEN)
// "ignore_unavailable=true" evita errors si és la primera vegada que s'executa
DELETE /pokemon?ignore_unavailable=true
DELETE /moves?ignore_unavailable=true
DELETE /teams?ignore_unavailable=true
DELETE /types?ignore_unavailable=true
DELETE /items?ignore_unavailable=true
DELETE /abilities?ignore_unavailable=true
DELETE /natures?ignore_unavailable=true
DELETE /users?ignore_unavailable=true

// 2. CREEM L'ÍNDEX `pokemon`
PUT /pokemon
{
"mappings": {
"properties": {
"pokedex_id": { "type": "integer" },
"name": {
"type": "text",
"fields": {
"keyword": { "type": "keyword" }
}
},
"types": { "type": "keyword" },
"stats": {
"properties": {
"hp": { "type": "integer" },
"attack": { "type": "integer" },
"defense": { "type": "integer" },
"special_attack": { "type": "integer" },
"special_defense": { "type": "integer" },
"speed": { "type": "integer" }
}
},
"abilities": {
"type": "nested",
"properties": {
"name": { "type": "keyword" },
"is_hidden": { "type": "boolean" }
}
},
"moves_pool": {
"type": "nested",
"properties": {
"name": { "type": "keyword" },
"learn_method": { "type": "keyword" }
}
},
"is_banned": { "type": "boolean" }
}
}
}
}

// 3. CREEM L'ÍNDEX `moves`
PUT /moves
{
"mappings": {
"properties": {
"move_id": { "type": "keyword" },
"name": {
"type": "text",
"fields": {
"keyword": { "type": "keyword" }
}
},
"type": { "type": "keyword" },
"category": { "type": "keyword" },
"power": { "type": "integer" },
"accuracy": { "type": "integer" },
"pp": { "type": "integer" },
"description": { "type": "text" }
}
}
}

// 4. CREEM L'ÍNDEX `teams`
PUT /teams
{
"mappings": {
"properties": {
"team_name": {
"type": "text",
"fields": {
"keyword": { "type": "keyword" }
}
},
"description": { "type": "text" },
"user_id": { "type": "keyword" },
"format": { "type": "keyword" },
"team_members": {
"type": "nested",
"properties": {
"base_pokemon": { "type": "keyword" },
"nickname": { "type": "text" },
"item": { "type": "keyword" },
"ability": { "type": "keyword" },
"tera_type": { "type": "keyword" },
"nature": { "type": "keyword" },
"moves": { "type": "keyword" },
"evs": {
"properties": {
"hp": { "type": "short" },
"attack": { "type": "short" },
"defense": { "type": "short" },
"sp_atk": { "type": "short" },
"sp_def": { "type": "short" },
"speed": { "type": "short" }
}
}
}
}
}
}
}

// 5. CREEM L'ÍNDEX `types` (Tipus de Pokémon i les seves relacions d'efectivitat)
PUT /types
{
"mappings": {
"properties": {
"type_id": { "type": "integer" },
"name": {
"type": "text",
"fields": {
"keyword": { "type": "keyword" }
}
},
"double_damage_from": { "type": "keyword" },
"half_damage_from": { "type": "keyword" },
"no_damage_from": { "type": "keyword" },
"double_damage_to": { "type": "keyword" },
"half_damage_to": { "type": "keyword" },
"no_damage_to": { "type": "keyword" }
}
}
}

// 6. CREEM L'ÍNDEX `items` (Objectes/Items de Pokémon)
PUT /items
{
"mappings": {
"properties": {
"item_id": { "type": "integer" },
"name": {
"type": "text",
"fields": {
"keyword": { "type": "keyword" }
}
},
"category": { "type": "keyword" },
"cost": { "type": "integer" },
"description": { "type": "text" },
"effect": { "type": "text" },
"attributes": { "type": "keyword" }
}
}
}

// 7. CREEM L'ÍNDEX `abilities` (Habilitats de Pokémon)
PUT /abilities
{
"mappings": {
"properties": {
"ability_id": { "type": "integer" },
"name": {
"type": "text",
"fields": {
"keyword": { "type": "keyword" }
}
},
"description": { "type": "text" },
"effect": { "type": "text" },
"generation": { "type": "keyword" }
}
}
}

// 8. CREEM L'ÍNDEX `natures` (Naturalezas de Pokémon)
PUT /natures
{
"mappings": {
"properties": {
"nature_id": { "type": "integer" },
"name": {
"type": "text",
"fields": {
"keyword": { "type": "keyword" }
}
},
"increased_stat": { "type": "keyword" },
"decreased_stat": { "type": "keyword" },
"likes_flavor": { "type": "keyword" },
"hates_flavor": { "type": "keyword" }
}
}
}

// 9. CREEM L'ÍNDEX `users` (Usuaris del sistema)
PUT /users
{
"mappings": {
"properties": {
"user_id": { 
"type": "integer"
},
"username": {
"type": "text",
"fields": {
"keyword": { "type": "keyword" }
}
},
"email": { 
"type": "keyword"
},
"password_hash": { 
"type": "keyword"
},
"created_at": { 
"type": "date"
},
"updated_at": { 
"type": "date"
},
"is_active": { 
"type": "boolean"
},
"profile": {
"properties": {
"full_name": { "type": "text" },
"avatar_url": { "type": "keyword" },
"bio": { "type": "text" },
"favorite_pokemon": { "type": "keyword" }
}
},
"preferences": {
"properties": {
"default_format": { "type": "keyword" },
"language": { "type": "keyword" },
"theme": { "type": "keyword" }
}
}
}
}
}